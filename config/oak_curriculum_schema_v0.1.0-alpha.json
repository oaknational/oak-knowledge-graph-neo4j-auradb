{
  "_comments": {
    "materialized_views": "These are the columns extracted from Hasura MV",
    "filters": "Filters applied during data cleaning",
    "filters_example": {
      "subjectTitle": ["Biology", "Maths"],
      "keyStageTitle": "Key Stage 4",
      "yearTitle": "Year 11"
    },
    "schema_mapping": "Mapping from CSV columns to Neo4j nodes and relationships"
  },
  
  "hasura_endpoint": "${HASURA_ENDPOINT}",
  "export_from_hasura": true,
  "import_to_neo4j": true,
  "materialized_views": {
    "published_mv_synthetic_unitvariant_lessons_by_keystage_18_0_0": [
      "features",
      "is_legacy",
      "lesson_data",
      "lesson_slug: lesson_data(path: \"slug\")",
      "lesson_title: lesson_data(path: \"title\")",
      "lesson_id: lesson_data(path: \"lesson_id\")",
      "lesson_description: lesson_data(path: \"description\")",
      "lesson_key_learning_points: lesson_data(path: \"key_learning_points\")",
      "null_unitvariant_id",
      "order_in_unit",
      "programme_fields",
      "programme_tier: programme_fields(path: \"tier\")",
      "programme_tier_id: programme_fields(path: \"tier_id\")",
      "programme_tier_slug: programme_fields(path: \"tier_slug\")",
      "programme_tier_description: programme_fields(path: \"tier_description\")",
      "programme_tier_display_order: programme_fields(path: \"tier_display_order\")",
      "programme_year: programme_fields(path: \"year\")",
      "programme_year_id: programme_fields(path: \"year_id\")",
      "programme_year_slug: programme_fields(path: \"year_slug\")",
      "programme_year_description: programme_fields(path: \"year_description\")",
      "programme_year_display_order: programme_fields(path: \"year_display_order\")",
      "programme_phase: programme_fields(path: \"phase\")",
      "programme_phase_id: programme_fields(path: \"phase_id\")",
      "programme_phase_slug: programme_fields(path: \"phase_slug\")",
      "programme_phase_description: programme_fields(path: \"phase_description\")",
      "programme_phase_display_order: programme_fields(path: \"phase_display_order\")",
      "programme_pathway: programme_fields(path: \"pathway\")",
      "programme_pathway_id: programme_fields(path: \"pathway_id\")",
      "programme_pathway_slug: programme_fields(path: \"pathway_slug\")",
      "programme_pathway_description: programme_fields(path: \"pathway_description\")",
      "programme_pathway_display_order: programme_fields(path: \"pathway_display_order\")",
      "programme_subject: programme_fields(path: \"subject\")",
      "programme_subject_id: programme_fields(path: \"subject_id\")",
      "programme_subject_slug: programme_fields(path: \"subject_slug\")",
      "programme_subject_description: programme_fields(path: \"subject_description\")",
      "programme_subject_display_order: programme_fields(path: \"subject_display_order\")",
      "programme_subject_parent: programme_fields(path: \"subject_parent\")",
      "programme_subject_parent_id: programme_fields(path: \"subject_parent_id\")",
      "programme_keystage: programme_fields(path: \"keystage\")",
      "programme_keystage_id: programme_fields(path: \"keystage_id\")",
      "programme_keystage_slug: programme_fields(path: \"keystage_slug\")",
      "programme_keystage_description: programme_fields(path: \"keystage_description\")",
      "programme_keystage_display_order: programme_fields(path: \"keystage_display_order\")",
      "programme_examboard: programme_fields(path: \"examboard\")",
      "programme_examboard_id: programme_fields(path: \"examboard_id\")",
      "programme_examboard_slug: programme_fields(path: \"examboard_slug\")",
      "programme_examboard_description: programme_fields(path: \"examboard_description\")",
      "programme_examboard_display_order: programme_fields(path: \"examboard_display_order\")",
      "programme_slug",
      "unit_data",
      "unit_id: unit_data(path: \"unit_id\")",
      "unit_title: unit_data(path: \"title\")",
      "unit_slug: unit_data(path: \"slug\")",
      "unit_description: unit_data(path: \"description\")",
      "unit_why_this_why_now: unit_data(path: \"why_this_why_now\")",
      "unit_planned_number_of_lessons: unit_data(path: \"planned_number_of_lessons\")",
      "unitvariant_id"
    ]
  },

  "join_strategy": {
    "type": "single_source",
    "primary_mv": "published_mv_synthetic_unitvariant_lessons_by_keystage_18_0_0",
    "joins": []
  },
  "filters": {
    "is_legacy": false,
    "programme_subject": ["History"],
    "programme_year_description": "Year 5"
  },

  "test_limit": null,
  "clear_database_before_import": true,

  "schema_mapping": {

    "nodes": {

      "Schemaversion": {
        "id_field": {
          "hasura_col": "",
          "type": "string",
          "property_name": "schemaVersion",
          "synthetic_value": "v0.1.0-alpha"
        },
        "properties": {
          "schemaDescription": {
            "hasura_col": "",
            "type": "string",
            "synthetic_value": "Schema design and experimentation."
          },
          "isActive": {
            "hasura_col": "",
            "type": "boolean",
            "synthetic_value": true
          },
          "lastUpdated": {
            "hasura_col": "current_timestamp",
            "type": "datetime",
            "synthetic_value": ""
          }
        }
      },
      "Subject": {
        "id_field": {
          "hasura_col": "programme_subject_slug",
          "type": "string",
          "property_name": "subjectSlug",
          "synthetic_value": ""
        },
        "properties": {
          "subjectTitle": {
            "hasura_col": "programme_subject",
            "type": "string",
            "synthetic_value": ""
          },
          "displayOrder": {
            "hasura_col": "programme_subject_display_order",
            "type": "int",
            "synthetic_value": ""
          },
          "subjectId": {
            "hasura_col": "programme_subject_id",
            "type": "int",
            "synthetic_value": ""
          },
          "subjectDescription": {
            "hasura_col": "programme_subject_description",
            "type": "string",
            "synthetic_value": ""
          },
          "subjectParentTitle": {
            "hasura_col": "programme_subject_parent",
            "type": "string",
            "synthetic_value": ""
          },
          "subjectParentId": {
            "hasura_col": "programme_subject_parent_id",
            "type": "int",
            "synthetic_value": ""
          },
          "lastUpdated": {
            "hasura_col": "current_timestamp",
            "type": "datetime",
            "synthetic_value": ""
          }
        }
      },
      "Phase": {
        "id_field": {
          "hasura_col": "programme_phase_slug",
          "type": "string",
          "property_name": "phaseSlug",
          "synthetic_value": ""
        },
        "properties": {
          "phaseTitle": {
            "hasura_col": "programme_phase",
            "type": "string",
            "synthetic_value": ""
          },
          "phaseDescription": {
            "hasura_col": "programme_phase_description",
            "type": "string",
            "synthetic_value": ""
          },
          "phaseId": {
            "hasura_col": "programme_phase_id",
            "type": "int",
            "synthetic_value": ""
          },
          "displayOrder": {
            "hasura_col": "programme_phase_display_order",
            "type": "int",
            "synthetic_value": ""
          },
          "lastUpdated": {
            "hasura_col": "current_timestamp",
            "type": "datetime",
            "synthetic_value": ""
          }
        }
      },
      "Keystage": {
        "id_field": {
          "hasura_col": "programme_keystage_slug",
          "type": "string",
          "property_name": "keyStageSlug",
          "synthetic_value": ""
        },
        "properties": {
          "keyStageTitle": {
            "hasura_col": "programme_keystage",
            "type": "string",
            "synthetic_value": ""
          },
          "keyStageDescription": {
            "hasura_col": "programme_keystage_description",
            "type": "string",
            "synthetic_value": ""
          },
          "keyStageId": {
            "hasura_col": "programme_keystage_id",
            "type": "int",
            "synthetic_value": ""
          },
          "displayOrder": {
            "hasura_col": "programme_keystage_display_order",
            "type": "int",
            "synthetic_value": ""
          },
          "lastUpdated": {
            "hasura_col": "current_timestamp",
            "type": "datetime",
            "synthetic_value": ""
          }
        }
      },
      "Year": {
        "id_field": {
          "hasura_col": "programme_year_slug",
          "type": "string",
          "property_name": "yearSlug",
          "synthetic_value": ""
        },
        "properties": {
          "yearTitle": {
            "hasura_col": "programme_year",
            "type": "string",
            "synthetic_value": ""
          },
          "yearDescription": {
            "hasura_col": "programme_year_description",
            "type": "string",
            "synthetic_value": ""
          },
          "yearId": {
            "hasura_col": "programme_year_id",
            "type": "int",
            "synthetic_value": ""
          },
          "displayOrder": {
            "hasura_col": "programme_year_display_order",
            "type": "int",
            "synthetic_value": ""
          },
          "lastUpdated": {
            "hasura_col": "current_timestamp",
            "type": "datetime",
            "synthetic_value": ""
          }
        }
      },
      "Unit": {
        "id_field": {
          "hasura_col": "unit_slug",
          "type": "string",
          "property_name": "unitSlug",
          "synthetic_value": ""
        },
        "properties": {
          "unitId": {
            "hasura_col": "unit_id",
            "type": "int",
            "synthetic_value": ""
          },
          "unitTitle": {
            "hasura_col": "unit_title",
            "type": "string",
            "synthetic_value": ""
          },
          "unitDescription": {
            "hasura_col": "unit_description",
            "type": "string",
            "synthetic_value": ""
          },
          "whyThisWhyNow": {
            "hasura_col": "unit_why_this_why_now",
            "type": "string",
            "synthetic_value": ""
          },
          "lastUpdated": {
            "hasura_col": "current_timestamp",
            "type": "datetime",
            "synthetic_value": ""
          }
        }
      },
      "Unitoffering": {
        "id_field": {
          "hasura_col": "",
          "type": "string",
          "property_name": "unitOfferingSlug",
          "synthetic_value": "{programme_year_slug}-{programme_subject_slug}"
        },
        "properties": {
          "lastUpdated": {
            "hasura_col": "current_timestamp",
            "type": "datetime",
            "synthetic_value": ""
          }
        }
      },
      "Programme": {
        "id_field": {
          "hasura_col": "programme_slug",
          "type": "string",
          "property_name": "programmeSlug",
          "synthetic_value": ""
        },
        "properties": {
          "lastUpdated": {
            "hasura_col": "current_timestamp",
            "type": "datetime",
            "synthetic_value": ""
          }
        }
      },
      "Tier": {
        "id_field": {
          "hasura_col": "programme_tier_slug",
          "type": "string",
          "property_name": "tierSlug",
          "synthetic_value": ""
        },
        "properties": {
          "tierTitle": {
            "hasura_col": "programme_tier",
            "type": "string",
            "synthetic_value": ""
          },
          "tierId": {
            "hasura_col": "programme_tier_id",
            "type": "int",
            "synthetic_value": ""
          },
          "tierDescription": {
            "hasura_col": "programme_tier_description",
            "type": "string",
            "synthetic_value": ""
          },
          "displayOrder": {
            "hasura_col": "programme_tier_display_order",
            "type": "int",
            "synthetic_value": ""
          },
          "lastUpdated": {
            "hasura_col": "current_timestamp",
            "type": "datetime",
            "synthetic_value": ""
          }
        }
      },
      "Examboard": {
        "id_field": {
          "hasura_col": "programme_examboard_slug",
          "type": "string",
          "property_name": "examBoardSlug",
          "synthetic_value": ""
        },
        "properties": {
          "examBoardTitle": {
            "hasura_col": "programme_examboard",
            "type": "string",
            "synthetic_value": ""
          },
          "examBoardId": {
            "hasura_col": "programme_examboard_id",
            "type": "int",
            "synthetic_value": ""
          },
          "examBoardDescription": {
            "hasura_col": "programme_examboard_description",
            "type": "string",
            "synthetic_value": ""
          },
          "displayOrder": {
            "hasura_col": "programme_examboard_display_order",
            "type": "int",
            "synthetic_value": ""
          },
          "lastUpdated": {
            "hasura_col": "current_timestamp",
            "type": "datetime",
            "synthetic_value": ""
          }
        }
      },
      "Unitvariant": {
        "id_field": {
          "hasura_col": "",
          "type": "string",
          "property_name": "unitVariantSlug",
          "synthetic_value": "{unitvariant_id}-{unit_slug}"
        },
        "properties": {
          "unitVariantId": {
            "hasura_col": "unitvariant_id",
            "type": "int",
            "synthetic_value": ""
          },
          "lastUpdated": {
            "hasura_col": "current_timestamp",
            "type": "datetime",
            "synthetic_value": ""
          }
        }
      },
      "Lesson": {
        "id_field": {
          "hasura_col": "lesson_slug",
          "type": "string",
          "property_name": "lessonSlug",
          "synthetic_value": ""
        },
        "properties": {
          "lessonTitle": {
            "hasura_col": "lesson_title",
            "type": "string",
            "synthetic_value": ""
          },
          "lessonId": {
            "hasura_col": "lesson_id",
            "type": "int",
            "synthetic_value": ""
          },
          "lessonDescription": {
            "hasura_col": "lesson_description",
            "type": "string",
            "synthetic_value": ""
          },
          "lastUpdated": {
            "hasura_col": "current_timestamp",
            "type": "datetime",
            "synthetic_value": ""
          }
        }
      },
      "Keylearningpoint": {
        "id_field": {
          "hasura_col": "lesson_key_learning_points_key_learning_point",
          "type": "string",
          "property_name": "keyLearningPoint",
          "synthetic_value": ""
        },
        "properties": {
          "lastUpdated": {
            "hasura_col": "current_timestamp",
            "type": "datetime",
            "synthetic_value": ""
          }
        }
      }
    },

    "relationships": {

      "phase_has_keystage": {
        "relationship_type": "HAS_KEY_STAGE",
        "start_node_type": "Phase",
        "start_node_field": "programme_phase_slug",
        "end_node_type": "Keystage",
        "end_node_field": "programme_keystage_slug",
        "properties": {
          "lastUpdated": {
            "hasura_col": "current_timestamp",
            "type": "datetime"
          }
        }
      },
      
      "keystage_has_year": {
        "relationship_type": "HAS_YEAR",
        "start_node_type": "Keystage",
        "start_node_field": "programme_keystage_slug",
        "end_node_type": "Year",
        "end_node_field": "programme_year_slug",
        "properties": {
          "lastUpdated": {
            "hasura_col": "current_timestamp",
            "type": "datetime"
          }
        }
      },
      
      "subject_has_offering": {
        "relationship_type": "HAS_UNIT_OFFERING",
        "start_node_type": "Subject",
        "start_node_field": "programme_subject_slug",
        "end_node_type": "Unitoffering",
        "end_node_field": "unitOfferingSlug",
        "properties": {
          "lastUpdated": {
            "hasura_col": "current_timestamp",
            "type": "datetime"
          }
        }
      },

      "year_has_offering": {
        "relationship_type": "HAS_UNIT_OFFERING",
        "start_node_type": "Year",
        "start_node_field": "programme_year_slug",
        "end_node_type": "Unitoffering",
        "end_node_field": "unitOfferingSlug",
        "properties": {
          "lastUpdated": {
            "hasura_col": "current_timestamp",
            "type": "datetime"
          }
        }
      },

      "offering_has_programme": {
        "relationship_type": "HAS_PROGRAMME",
        "start_node_type": "Unitoffering",
        "start_node_field": "unitOfferingSlug",
        "end_node_type": "Programme",
        "end_node_field": "programme_slug",
        "properties": {
          "lastUpdated": {
            "hasura_col": "current_timestamp",
            "type": "datetime"
          }
        }
      },
      
      "offering_has_unit": {
        "relationship_type": "HAS_UNIT",
        "start_node_type": "Unitoffering",
        "start_node_field": "unitOfferingSlug",
        "end_node_type": "Unit",
        "end_node_field": "unit_slug",
        "properties": {
          "unitOrder": {
            "hasura_col": "order_in_unit",
            "type": "int"
          },
          "lastUpdated": {
            "hasura_col": "current_timestamp",
            "type": "datetime"
          }
        }
      },

      "unit_has_unitvariant": {
        "relationship_type": "HAS_UNITVARIANT",
        "start_node_type": "Unit",
        "start_node_field": "unit_slug",
        "end_node_type": "Unitvariant",
        "end_node_field": "unitVariantSlug",
        "properties": {
          "lastUpdated": {
            "hasura_col": "current_timestamp",
            "type": "datetime"
          }
        }
      },

      "programme_has_unitvariant": {
        "relationship_type": "HAS_UNITVARIANT",
        "start_node_type": "Programme",
        "start_node_field": "programme_slug",
        "end_node_type": "Unitvariant",
        "end_node_field": "unitVariantSlug",
        "properties": {
          "lastUpdated": {
            "hasura_col": "current_timestamp",
            "type": "datetime"
          }
        }
      },

      "unitvariant_has_lesson": {
        "relationship_type": "HAS_LESSON",
        "start_node_type": "Unitvariant",
        "start_node_field": "unitVariantSlug",
        "end_node_type": "Lesson",
        "end_node_field": "lesson_slug",
        "properties": {
          "lastUpdated": {
            "hasura_col": "current_timestamp",
            "type": "datetime"
          }
        }
      },

      "lesson_has_keylearningpoint": {
        "relationship_type": "HAS_KLP",
        "start_node_type": "Lesson",
        "start_node_field": "lesson_slug",
        "end_node_type": "Keylearningpoint",
        "end_node_field": "lesson_key_learning_points_key_learning_point",
        "properties": {
          "lastUpdated": {
            "hasura_col": "current_timestamp",
            "type": "datetime"
          }
        }
      }
    }
  }
}